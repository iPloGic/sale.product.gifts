# README #

Компонент **sale.product.gifts** - блок выбора подарка к покупаемому товару. Подарки настраиваются через штатные средства Битрикс в настройках правил работы с корзиной.

### Подключение ###

Создайте на сайте директорию `\local\components\iplogic`. Скопируйте в нее скачанную директорию компонента sale.product.gifts.

В нужном месте сайта добавьте вызов компонента. Код для подключения:

```
<?$APPLICATION->IncludeComponent(
	'iplogic:sale.product.gifts',
	'.default',
	array(
		"PRODUCT_ID" => $arResult['ID'] ?? [],
		"USE_PRICES" => "Y",
		"TITLE" => "Выберите подарок",
		"CACHE_TIME" => 36000,
		"CACHE_TYPE" => "N",
	),
	$component
);?>
```

### Параметры ###

Параметры компонента описаны в таблице. Стандартные параметры для компонента опущены, о них можно узнать в документации Битрикс.

| Параметр | Описание                    |
| ------------- | ------------------------------ |
| PRODUCT_ID      | ID товара(ов). Может быть числовым значением id одного товара, нескольких через запятую или массивом.  |
| USE_PRICES   |  Нужно ли передавать в массив $arResult цены подарочных товаров. Если вы хотите выводить цены, поставьте Y, если нет, то N, что облегчит и ускорит работу компонента.   |
| TITLE   |  Заголовок блока.    |


### Добавление подарков в корзину ###

За добавление подарков в корзину отвечают js скрипты шаблона компонента. По причине того, что заранее неизвестно как в шаблоне сайта предполагается добавлять товары в корзину не возможно сделать метод, который можно применить везде. Поэтому необходимо дописать скрипты обеспечивабщие вашу логику работы. Во встроенном шаблоне это возможно сделать двумя путями:

1. Дописать в функции `window.JCSaleProductGiftsComponent.prototype.changeGifts` (файл script.js шаблона) свой код обработки выбора подарка. Код вставляется вместо комментария. Переменная id содержит идентификатор выбранного подарка.

2. Использовать во внешних скриптах сайта вставку строки `let giftId = window.oJCSaleProductGiftsComponent.getGiftId();`. После этого переменная `giftId` будет содержать id товара подарка, который можно добавлять в корзину вместе с основным товаром.

Внимание! Представленные выше способы обновления информации актуальны только для дефолтного шаблона компонента и шаблонов созданных на его основе без значительных изменений логики работы скриптов.
 